<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Form Example</title>
    <style>
      /* Style for the form container */
      .form-container {
        max-width: 400px;
        margin: 0 auto;
      }

      /* Style for the form container */
      .form-containerTwo {
        max-width: 400px;
        margin: 0 auto;
      }

      /* Style for the form container */
      .form-containerThree {
        max-width: 400px;
        margin: 0 auto;
      }

      /* Style for the form container */
      .form-containerFour {
        max-width: 400px;
        margin: 0 auto;
      }

      /* Style for the input fields */
      input[type="text"],
      select {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
      }

      /* Style for the submit button */
      input[type="submit"] {
        background-color: #4caf50;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <!-- retrieve-->

    <div id="all-tasks">
      <h1>ALL TASKS</h1>
    </div>

    <!-- retrieve-->

    <br /><br />
    <div class="form-containerTwo" id="formContainerTwo">
      <form id="myFormTwo">
        <h3>Retreive Task by ID</h3>

        <div>
          <input
            type="text"
            id="taskID"
            name="taskID"
            placeholder="Enter Task ID."
            required
          /><br /><br />
          <input type="submit" value="Submit" id="retrieve" />
          <br /><br /><br />
        </div>
      </form>
    </div>

    <br /><br /><br />
    <br /><br /><br />

    <!-- Update-->
    <div class="form-containerThree">
      <form class=" " id="myFormThree">
        <br /><br />
        <h3>Update Task</h3>

        <div>
          <input
            type="text"
            id="taskID"
            name="taskID"
            placeholder="Enter Task ID."
            required
          /><br /><br />
          <input type="submit" value="Submit" id="retrieve" />
          <br /><br /><br />
        </div>
        <!-- Text input field -->
        <!--date task created-->
        <div>
          <div class="formbox">
            <label for="date">Enter date:</label>
            <input
              type="date"
              id="date"
              name="date"
              placeholder="Enter date DD/MM/YYYY"
              required
            /><br /><br />
          </div>
        </div>

        <div>
          <label for="deadline">Enter deadline date:</label>
          <input
            type="date"
            id="deadline"
            name="deadline"
            placeholder="Enter deadline DD/MM/YYYY"
            required
          />
          <br /><br />
        </div>
        <div>
          <label for="taskTitle">Enter Task Title:</label>
          <textarea
            id="taskTitle"
            name="taskTitle"
            rows="2"
            cols="100"
            placeholder="Enter Task Title"
          ></textarea>
          <br /><br />
        </div>

        <div>
          <label for="taskDetails">Enter Task Information:</label>
          <textarea
            id="taskDetails"
            name="taskDetails"
            rows="10"
            cols="100"
            placeholder="Enter Task.."
          ></textarea>
          <br /><br />
        </div>

        <div>
          <!-- Drop-down menu -->
          <label for="priority">Select Task priority:</label>
          <select id="priority" name="priority">
            <option value="High priority">High priority</option>
            <option value="Medium priority">Medium priority</option>
            <option value="Low priority">Low priority</option>
          </select>
          <br /><br />
        </div>

        <div>
          <label for="taskStatus">Select Task Status:</label>
          <select id="taskStatus" name="taskStatus">
            <option value="Not Started">Not Started</option>
            <option value="In Progress">In Progress</option>
            <option value="Completed">Completed</option>
          </select>
          <br /><br />

          <!-- Submit button -->
          <input type="submit" value="Submit" />
          <br /><br /><br />
        </div>
      </form>
    </div>

    <!-- Delete-->
    <br /><br />
    <div class="form-containerFour">
      <form id="myFormFour">
        <h3>Delete Task by ID</h3>

        <div>
          <input
            type="text"
            id="taskID_Delete"
            name="taskID_Delete"
            placeholder="Enter Task ID."
            required
          /><br /><br />
          <input type="submit" value="Submit" id="delete" />
          <br /><br /><br />
        </div>
      </form>
    </div>

    <br /><br /><br />
    <br /><br /><br />

    <script>
      const allTasks = document.querySelector("#all-tasks");
      async function fetchAllTasks() {
        try {
          //fetch all tasks from the back end data.json
          const { tasks } = await fetch("/tasks")
            .then((res) => res.json())
            .then((res) => res);

          if (tasks) {
            console.log(tasks);
            for (let i = 0; i < tasks.length; i++) {
              // Create a new div element
              const taskDiv = document.createElement("div");
              // Use innerHTML to set the content of the div
              taskDiv.innerHTML = `
            <h4>Title: ${tasks[i].taskTitle}</h4>
            <p>Task Details: ${tasks[i].taskDetails}</p>
            <p>Status: ${tasks[i].taskStatus}</p>
            <p>Priority: ${tasks[i].priority}</p>
            <p>Deadline: ${tasks[i].deadline}</p>
            <p><span>Edit Task</span></p>
        `;
              // Append the newly created div to allTasks
              allTasks.appendChild(taskDiv);
            }
          }
        } catch (error) {
          console.error("Error fetching all tasks:", error);
        }
      }
      fetchAllTasks();

      //Get task by Task ID
      const theMyFormTwo = document.querySelector("#myFormTwo");
      theMyFormTwo.addEventListener("submit", (ev) => {
        ev.preventDefault();
        let taskTwo = document.getElementById("taskID");
        //console.log();
        //search file for ID and return file
        async function fetchTaskById(taskID) {
          try {
            //call task Id from the back end to give particular data with this ID
            const task = await fetch(`/tasks?id=${taskID}`)
              .then((res) => res.json())
              .then((res) => res);
            if (task) {
              console.log(task);
              const taskDiv = document.createElement("div");

              const title = document.createElement("h2");
              title.textContent = task.taskTitle;
              taskDiv.appendChild(title);
              //Append complete task document to form and show on screen
              myFormTwo.appendChild(taskDiv);

              formContainerTwo.appendChild(taskDiv);
            }
          } catch (error) {
            console.error("Error fetching task by ID:", error);
          }
        }
        fetchTaskById(taskTwo.value);
      });

      //Update
      //Get task by taskID and display task details in message box
      //Update task information and save back to file.
      const theMyFormThree = document.querySelector("#myFormThree");
      theMyFormThree.addEventListener("submit", (ev) => {
        ev.preventDefault();
        let taskThree = document.getElementById("taskID");
        //console.log();
        //search file for ID and return file
        async function fetchTaskById(taskID) {
          try {
            //call task Id from the back end to give particular data with this ID
            const theTaskThree = await fetch(`/tasks?id=${taskID}`)
              .then((res) => res.json())
              .then((res) => res);
            if (theTaskThree) {
              console.log(theTaskThree);
            }
          } catch (error) {
            console.error("Error fetching task by ID:", error);
          }
        }
        fetchTaskById(taskThree.value);
      });

      //Delete
      //Get task by taskID and delete task details from file
      //Update task information and save back to file.
      const theMyFormFour = document.querySelector("#myFormFour");
      theMyFormFour.addEventListener("submit", (ev) => {
        ev.preventDefault();
        let taskFour = document.getElementById("taskID_Delete").value;
        console.log(taskFour);
        //search file for ID and return file
        fetch("/delete", {
          method: "DELETE",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({ taskID: taskFour }),
        })
          .then((res) => res.json())
          .then((data) => {
            console.log("Task deleted:", data);
          })
          .catch((error) => {
            console.error(
              "There was a problem with the delete operation:",
              error
            );
          });
      });

      /*

            const formContainerTwo = document.querySelector("#form-containerTwo");
            const myFormTwo = document.querySelector("#myFormTwo");
            myFormTwo.addEventListener("submit", (ev) => {
              ev.preventDefault();
              let taskTwo = document.getElementById("taskID");

              //search file for ID and return file
              async function fetchTaskById(id) {
                try {
                  const task = await fetch(`/tasks?id=${id}`)
                    .then((res) => res.json())
                    .then((res) => res);
                  if (task) {
                    console.log(task);


                    //Append task date to document
                    const taskDiv = document.createElement("div");


                    const title = document.createElement("h2");
                    title.textContent = task.taskTitle;
                    taskDiv.appendChild(title);

                    //Append task date to document
                    const introdate = document.createElement("h2");
                    introdate.textContent = task.date;
                    taskDiv.appendChild(introdate);

                    //Append task deadline date to document
                    const deaddate = document.createElement("h2");
                    deaddate.textContent = task.deadline;
                    taskDiv.appendChild(deaddate);

                    //Append task details date to document
                    const thetaskDetails = document.createElement("h2");
                    thetaskDetails.textContent = task.taskDetails;
                    taskDiv.appendChild(thetaskDetails);

                    //Append task priority level to document
                    const thepriority = document.createElement("h2");
                    thepriority.textContent = task.priority;
                    taskDiv.appendChild(thepriority);

                    //Append task status to document
                    const thetaskStatus = document.createElement("h2");
                    thetaskStatus.textContent = task.taskStatus;
                    taskDiv.appendChild(thetaskStatus);


                    //Append complete task document to form and show on screen
                    formContainerTwo.appendChild(task);
                  }
                } catch (error) {
                  console.error("Error fetching task by ID:", error);
                }
              }
              fetchTaskById(taskTwo.value);
            });
            */
    </script>
  </body>
</html>
Shared in
